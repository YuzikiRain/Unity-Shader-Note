## 深度

ComputeScreenPos得到片元的屏幕坐标



`tex2Dproj`（而不是tex2D）采样`_CameraDepthTexture`得到非线性深度值

`LinearEyeDepth`转换成线性深度

``` glsl
// vertex shader
float4 screenPosition = ComputeScreenPos(positionCS);  // 范围为[0,w]
tex2Dproj(_CameraDepthTexture, screenPosition);  // tex2Dproj会先将uv先除以w再进行采样，即使用范围为[0,1]的uv进行采样
```

ComputeScreenPos得到片元的屏幕坐标，

UNITY_PROJ_COORD(屏幕坐标)变换到0~1（作为uv），

tex2Dproj采样_CameraDepthTexture得到非线性深度值，

（水面的原始深度值就是ComputeScreenPos这个函数返回的w。在进行透视除法之前，原始深度值一直保存在vertex的w分量）
LinearEyeDepth转换成线性深度，与水平面深度得到差值，作为颜色的插值项

## 水面

为了模拟水面的起伏，可以使用法线贴图或FFT变换顶点，同样进行基本的反射计算，同样进行基本的反射计算